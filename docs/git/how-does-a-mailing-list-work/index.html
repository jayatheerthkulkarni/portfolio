<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0"
		/>
		<title>The Architecture of Git Mailing Lists</title>

		<link rel="icon" type="image/x-icon" href="./favicon.ico" />

		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link
			rel="preconnect"
			href="https://fonts.gstatic.com"
			crossorigin
		/>
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap"
			rel="stylesheet"
		/>

		<style>
			:root {
				--font-main:
					"Inter", -apple-system,
					BlinkMacSystemFont, "Segoe UI", Roboto,
					sans-serif;
				--font-mono:
					"SFMono-Regular", "Menlo", "Monaco",
					"Consolas", monospace;

				--bg: #ffffff;
				--text: #111111;
				--text-secondary: #555555;
				--accent: #0066ff;
				--border: #eeeeee;
				--card-bg: #f9f9f9;
				--code-bg: #f1f3f5;
			}

			[data-theme="dark"] {
				--bg: #0d0d0d;
				--text: #f0f0f0;
				--text-secondary: #a0a0a0;
				--accent: #3b82f6;
				--border: #222222;
				--card-bg: #161616;
				--code-bg: #222429;
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
				transition:
					background 0.2s ease,
					color 0.2s ease;
			}

			body {
				font-family: var(--font-main);
				background-color: var(--bg);
				color: var(--text);
				line-height: 1.6;
				-webkit-font-smoothing: antialiased;
			}

			.container {
				max-width: 680px;
				margin: 0 auto;
				padding: 2rem 1.2rem;
			}

			/* Navigation */
			.nav {
				display: flex;
				justify-content: space-between;
				margin-bottom: 3rem;
			}

			.btn {
				background: var(--card-bg);
				border: 1px solid var(--border);
				width: 42px;
				height: 42px;
				border-radius: 10px;
				cursor: pointer;
				display: flex;
				align-items: center;
				justify-content: center;
				color: var(--text);
			}

			.btn:hover {
				border-color: var(--accent);
				transform: translateY(-1px);
			}

			.btn svg {
				width: 18px;
				height: 18px;
				fill: currentColor;
			}

			/* Hero Image */
			.hero-img {
				width: 100%;
				height: auto;
				aspect-ratio: 16 / 9;
				object-fit: cover;
				border-radius: 16px;
				margin-bottom: 3rem;
				border: 1px solid var(--border);
			}

			/* Content */
			.meta {
				font-size: 0.75rem;
				font-weight: 700;
				color: var(--accent);
				text-transform: uppercase;
				letter-spacing: 0.1em;
				margin-bottom: 0.75rem;
				display: block;
			}

			h1 {
				font-size: 2.8rem;
				font-weight: 800;
				letter-spacing: -0.04em;
				line-height: 1.1;
				margin-bottom: 2rem;
			}

			.intro {
				font-size: 1.2rem;
				color: var(--text-secondary);
				border-left: 3px solid var(--accent);
				padding-left: 1.25rem;
				margin-bottom: 3.5rem;
			}

			h2 {
				font-size: 1.5rem;
				font-weight: 700;
				margin: 3.5rem 0 1.25rem;
				letter-spacing: -0.02em;
			}

			p {
				margin-bottom: 1.5rem;
				font-size: 1.05rem;
			}

			.block {
				background: var(--card-bg);
				border: 1px solid var(--border);
				padding: 1.75rem;
				border-radius: 12px;
				margin-bottom: 2rem;
			}

			.block h3 {
				font-size: 1.1rem;
				margin-bottom: 0.75rem;
				color: var(--text);
			}

			code {
				font-family: var(--font-mono);
				background: var(--code-bg);
				padding: 0.2rem 0.4rem;
				border-radius: 4px;
				font-size: 0.9rem;
			}

			ul {
				margin-bottom: 1.5rem;
				padding-left: 1rem;
				list-style: square;
			}
			li {
				margin-bottom: 0.5rem;
				color: var(--text-secondary);
			}
			li strong {
				color: var(--text);
			}

			@media (max-width: 600px) {
				h1 {
					font-size: 2rem;
				}
				.container {
					padding: 1rem;
				}
			}
		</style>
	</head>
	<body>
		<div class="container">
			<nav class="nav">
				<button
					onclick="goBack()"
					class="btn"
					title="Back"
				>
					<svg viewBox="0 0 24 24">
						<path
							d="M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"
						/>
					</svg>
				</button>
				<button
					id="theme-toggle"
					class="btn"
					title="Theme"
				>
					<svg viewBox="0 0 24 24">
						<path
							d="M12,18C11.11,18 10.26,17.8 9.5,17.45C11.56,16.5 13,14.42 13,12C13,9.58 11.56,7.5 9.5,6.55C10.26,6.2 11.11,6 12,6A6,6 0 0,1 18,12A6,6 0 0,1 12,18M20,8.69V4H15.31L12,0.69L8.69,4H4V8.69L0.69,12L4,15.31V20H8.69L12,23.31L15.31,20H20V15.31L23.31,12L20,8.69Z"
						/>
					</svg>
				</button>
			</nav>

			<main>
				<img
					src="./mailinglist.png"
					alt="Git Infrastructure"
					class="hero-img"
				/>

				<span class="meta"
					>Git Protocol - Feb 20, 2025</span
				>
				<h1>How does a mailing list work?</h1>

				<p class="intro">
					The UI of a mailing list isn't very
					intuitive; it's very different from what
					we see in Gmail. Here's a simple
					explanation of how it actually functions
					under the hood.
				</p>

				<p>
					To understand Git's development, you
					have to forget about the web. There is
					no central "Pull Request" database.
					Instead, the project relies on the
					Distributed Computing nature of SMTP.
				</p>

				<h2>The Patch Architecture</h2>
				<div class="block">
					<h3>Serialized Logic</h3>
					<p>
						A mailing list treats code as a
						series of immutable text
						instructions. When you run
						<code>git format-patch</code>,
						the software creates a Unix
						Mailbox file (mbox) for every
						commit.
					</p>
					<ul>
						<li>
							<strong
								>Message-ID:</strong
							>
							A globally unique hash
							that identifies a
							specific patch.
						</li>
						<li>
							<strong
								>In-Reply-To:</strong
							>
							The header that links a
							review comment back to
							the original code.
						</li>
						<li>
							<strong
								>References:</strong
							>
							A list of parent
							Message-IDs that build
							the discussion tree.
						</li>
					</ul>
				</div>

				<h2>The Transmission Layer</h2>
				<p>
					Git developers avoid standard webmail
					because browsers often "sanitize" text
					by converting tabs to spaces or
					stripping trailing whitespace. This
					breaks the patch integrity.
				</p>
				<p>
					The <code>git send-email</code> command
					bypasses the browser. It connects
					directly to a mail server to push the
					raw bytes. This ensures that when the
					maintainer receives the mail, the diff
					can be applied without a single
					character being altered.
				</p>

				<h2>Interleaved Review Style</h2>
				<div class="block">
					<h3>The Social Protocol</h3>
					<p>
						Reviews on the mailing list
						follow a strict "interleaved"
						format. Reviewers do not reply
						at the top. They scroll through
						the code, find a line, and type
						their feedback directly beneath
						it.
					</p>
					<ul>
						<li>
							<strong
								>Sniping:</strong
							>
							Removing irrelevant
							parts of the patch to
							keep the email short.
						</li>
						<li>
							<strong
								>Versioning:</strong
							>
							If a patch needs
							changes, the user sends
							a [PATCH v2]. This is
							not an update to the old
							file, but a completely
							new submission that
							references the old one.
						</li>
					</ul>
				</div>

				<h2>The Lore Archive</h2>
				<p>
					Because emails can be lost or deleted,
					the Git project uses
					<b>lore.kernel.org</b>. This is a
					"Public Inbox" that archives every
					single byte sent to the list. It exposes
					the archive as a Git repository itself.
					You can actually clone the entire
					history of the mailing list as if it
					were code.
				</p>

				<h2>Final Ingestion</h2>
				<p>
					The Maintainer uses
					<code>git am</code> (Apply Mailbox) to
					ingest the patches. This command pulls
					the metadata from the email headers -
					the author's name, the date, and the
					"Signed-off-by" trailer - and
					reconstructs the commit locally. The
					result is a perfectly preserved history
					that never touched a web interface.
				</p>
			</main>
		</div>

		<script>
			// Back Button
			function goBack() {
				if (window.history.length > 1) {
					window.history.back();
				} else {
					window.location.href = "./index.html";
				}
			}

			// Theme Switcher
			const toggle = document.getElementById("theme-toggle");
			const root = document.documentElement;

			const saved =
				localStorage.getItem("blog-theme") || "light";
			root.setAttribute("data-theme", saved);

			toggle.addEventListener("click", () => {
				const current = root.getAttribute("data-theme");
				const next =
					current === "light" ? "dark" : "light";
				root.setAttribute("data-theme", next);
				localStorage.setItem("blog-theme", next);
			});
		</script>
	</body>
</html>
